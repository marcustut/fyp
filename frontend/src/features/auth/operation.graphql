query UserByAccessToken($token: String!) {
  UserByAccessToken(token: $token) {
    ...UserWithAuthFields
  }
}

query Users(
  $after: Cursor
  $first: Int
  $before: Cursor
  $last: Int
  $where: UserWhereInput
  $orderBy: UserOrder
) {
  Users(
    after: $after
    first: $first
    before: $before
    last: $last
    where: $where
    orderBy: $orderBy
  ) {
    totalCount
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      node {
        ...UserFields
      }
    }
  }
}

mutation SignUp($input: CreateUserInput!) {
  SignUp(input: $input) {
    ...UserWithAuthFields
  }
}

mutation SignInWithUsername($input: SignInWithUsername!) {
  SignInWithUsername(input: $input) {
    ...UserWithAuthFields
  }
}

mutation SignInWithEmail($input: SignInWithEmail!) {
  SignInWithEmail(input: $input) {
    ...UserWithAuthFields
  }
}

fragment UserFields on User {
  id
  username
  email
  full_name
  avatar_url
  bio
  created_at
  updated_at
}

fragment UserWithAuthFields on UserWithAuth {
  access_token
  expired_at
  user {
    ...UserFields
  }
}
